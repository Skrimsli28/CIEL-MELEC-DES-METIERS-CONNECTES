<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CV Automatis√©</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
  <style>
   body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(to right, #f1f2f6, #dbe4f3);
  padding: 2rem;
  color: #343a40;
}

.formulaire {
  max-width: 800px;
  margin: auto;
  text-align: center;
  margin-bottom: 2rem;
  background: #ffffff;
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.formulaire label {
  font-weight: bold;
  display: block;
  margin-top: 1rem;
}

.formulaire input, .formulaire select {
  padding: 0.5rem;
  margin-top: 0.5rem;
  font-size: 1rem;
  width: 90%;
  max-width: 400px;
  border-radius: 6px;
  border: 1px solid #ced4da;
}

.cv-container {
  max-width: 800px;
  margin: auto;
  background: #ffffff;
  display: flex;
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  overflow: hidden;
}

.cv-left {
  background: #004080;
  color: white;
  width: 30%;
  padding: 1.5rem;
  text-align: center;
}

.cv-left img {
  display: none;
}

.cv-right {
  width: 70%;
  padding: 2rem;
  background: #ffffff;
}

.editable {
  border: 1px dashed #c0c0c0;
  border-radius: 4px;
  padding: 0.4rem;
  margin-bottom: 0.4rem;
  transition: background 0.2s ease;
}
.editable:focus {
  background: #f1f9ff;
  outline: none;
}

h1 {
  color: #2c3e50;
  border-bottom: 2px solid #004080;
  padding-bottom: 0.5rem;
  font-size: 1.8rem;
}

h2 {
  color: #004080;
  margin-top: 1.5rem;
  border-left: 4px solid #004080;
  padding-left: 0.5rem;
  font-size: 1.2rem;
}

ul {
  padding-left: 1.5rem;
}

li {
  margin-bottom: 0.5rem;
}

p {
  line-height: 1.6;
}

.download {
  text-align: center;
  margin-top: 2rem;
}

button {
  padding: 0.8rem 2rem;
  background: #004080;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.3s;
}

button:hover {
  background: #002d5f;
}

.add-btn {
  font-size: 0.9rem;
  background: #198754;
  margin-top: 0.5rem;
  border-radius: 4px;
}

  </style>
</head>
<body>
  <div class="formulaire">
    <label for="selectMetier">Choisis ton m√©tier :</label>
    <select id="selectMetier" onchange="updateCV()">
      <option>Technicien R√©seaux</option>
      <option>Domoticien</option>
      <option>Technicien Cybers√©curit√©</option>
      <option>√âlectricien du B√¢timent</option>
      <option>Automaticien</option>
      <option>Technicien √âlectronique</option>
    </select>
  </div>

  <div class="cv-container" id="cvContent">
    <div class="cv-left">
      <img src="logo-lycee.png" alt="Logo Lyc√©e">
      <p contenteditable="true" class="editable">Nom Pr√©nom</p>
      <p contenteditable="true" class="editable">T√©l√©phone</p>
      <p contenteditable="true" class="editable">Email</p>
      <p contenteditable="true" class="editable">Adresse</p>
    </div>
    <div class="cv-right">
      <h1 contenteditable="true" class="editable" id="titre">CV - [M√©tier]</h1>
      <p id="nomEntreprise" contenteditable="true" class="editable" style="font-style: italic; margin-top: -1rem;">Entreprise : _______________________</p>
      <h2>Profil</h2>
      <p id="profil" contenteditable="true" class="editable"></p>
      <h2>Comp√©tences Cl√©s</h2>
      <ul id="competences"></ul>
      <button class="add-btn" id="btnAddComp" onclick="addCompetence()">+ Ajouter une comp√©tence</button>
      <h2>Formation</h2>
      <p contenteditable="true" class="editable">Bac Pro CIEL ou MELEC selon sp√©cialit√©</p>
      <h2>Stages / Exp√©riences</h2>
      <ul id="stages"></ul>
      <button class="add-btn" id="btnAddStage" onclick="addStage()">+ Ajouter une exp√©rience</button>
      <h2>Loisirs</h2>
      <ul id="loisirs">
        <li contenteditable="true" class="editable">Exemple : Lecture, sport, informatique</li>
      </ul>
      <button class="add-btn" id="btnAddLoisir" onclick="addLoisir()">+ Ajouter un loisir</button>
    </div>
  </div>

  <div class="download">
    <button onclick="generatePDF()">üóÉÔ∏è T√©l√©charger le CV en PDF</button>
  </div>

  <script>
    const baseCV = {
      "Technicien R√©seaux": {
        profil: "Passionn√© par les infrastructures r√©seaux, la configuration et la cybers√©curit√©.",
        competences: [
          "Adressage IP, VLAN, r√©seaux LAN/WAN",
          "Configuration de routeurs et switchs",
          "Diagnostic et r√©solution de pannes",
          "Utilisation de Packet Tracer et Wireshark"
        ]
      },
      "Domoticien": {
        profil: "Sp√©cialiste des syst√®mes connect√©s pour le confort et la s√©curit√© du b√¢timent.",
        competences: [
          "Installation d‚Äôalarmes, volets, thermostats connect√©s",
          "Programmation de syst√®mes KNX, Arduino",
          "Lecture de plans et sch√©mas √©lectriques",
          "Maintenance et mise en service domotique"
        ]
      },
      "Technicien Cybers√©curit√©": {
        profil: "Motiv√© par la s√©curit√© informatique et la protection des donn√©es.",
        competences: [
          "Pare-feu, antivirus, mises √† jour",
          "Configuration de syst√®mes s√©curis√©s",
          "Notions d‚Äô√©thique et RGPD",
          "Surveillance des intrusions"
        ]
      },
      "√âlectricien du B√¢timent": {
        profil: "√Ä l‚Äôaise avec les installations √©lectriques dans le b√¢timent.",
        competences: [
          "C√¢blage courant fort/faible",
          "Lecture de plans √©lectriques",
          "Installation d'√©quipements domotiques",
          "Normes de s√©curit√© √©lectrique"
        ]
      },
      "Automaticien": {
        profil: "Attir√© par les syst√®mes industriels automatis√©s.",
        competences: [
          "GRAFCET, automates, relais logiques",
          "Coffrets de commande",
          "Maintenance de syst√®mes automatis√©s",
          "Programmation de cycles automatis√©s"
        ]
      },
      "Technicien √âlectronique": {
        profil: "Curieux et pr√©cis dans l‚Äôassemblage de circuits √©lectroniques.",
        competences: [
          "Lecture de sch√©mas √©lectroniques",
          "Utilisation d'Arduino, multim√®tre",
          "Soudure et test de composants",
          "Maintenance de syst√®mes embarqu√©s"
        ]
      }
    };

    function updateCV() {
      const metier = document.getElementById("selectMetier").value;
      const data = baseCV[metier] || baseCV["Technicien R√©seaux"];

      document.getElementById("titre").textContent = `CV - ${metier}`;
      document.getElementById("profil").textContent = data.profil;

      const compList = document.getElementById("competences");
      compList.innerHTML = "";
      data.competences.forEach(c => {
        const li = document.createElement("li");
        li.contentEditable = true;
        li.className = "editable";
        li.textContent = c;
        compList.appendChild(li);
      });

      const entrepriseTxt = document.getElementById("nomEntreprise").textContent.replace("Entreprise :", "").trim();

      const stageList = document.getElementById("stages");
      stageList.innerHTML = "";
      [
        `Stage de 6 semaines chez ${entrepriseTxt || "____________"}`,
        `Projet r√©alis√© en classe sur le th√®me : ${metier}`
      ].forEach(s => {
        const li = document.createElement("li");
        li.contentEditable = true;
        li.className = "editable";
        li.textContent = s;
        stageList.appendChild(li);
      });
    }

    function addCompetence() {
      const li = document.createElement("li");
      li.contentEditable = true;
      li.className = "editable";
      li.textContent = "Nouvelle comp√©tence";
      document.getElementById("competences").appendChild(li);
    }

    function addStage() {
      const li = document.createElement("li");
      li.contentEditable = true;
      li.className = "editable";
      li.textContent = "Nouvelle exp√©rience";
      document.getElementById("stages").appendChild(li);
    }

    function addLoisir() {
      const li = document.createElement("li");
      li.contentEditable = true;
      li.className = "editable";
      li.textContent = "Nouveau loisir";
      document.getElementById("loisirs").appendChild(li);
    }

    function generatePDF() {
      document.getElementById("btnAddComp").style.display = "none";
      document.getElementById("btnAddStage").style.display = "none";
      document.getElementById("btnAddLoisir").style.display = "none";

      const element = document.getElementById("cvContent");
      const opt = {
        margin: 0.5,
        filename: 'CV_Personnalise.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
      };

      html2pdf().set(opt).from(element).save().then(() => {
        document.getElementById("btnAddComp").style.display = "inline-block";
        document.getElementById("btnAddStage").style.display = "inline-block";
        document.getElementById("btnAddLoisir").style.display = "inline-block";
      });
    }

    window.onload = updateCV;
  </script>
</body>
</html>
